# S3 CSI with authentication test
# Tests: S3 backend + htpasswd authentication

pypiserver:
  replicaCount: 1
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"

storage:
  backend: s3
  local:
    enabled: false
  s3:
    enabled: true
    bucket: pypi-packages
    region: us-east-1
    accessKeyId: minioadmin
    secretAccessKey: minioadmin
    csi:
      enabled: true
      endpoint: "http://minio:9000"
      prefix: "s3-auth/"
      size: "10Gi"

auth:
  enabled: true
  method: htpasswd
  htpasswd:
    # Username: testuser, Password: testpass
    content: |
      testuser:$2y$10$KurSfbKU0QGTDFG03W5GxeLif/0PVrTXyoZFL5SRV1wsgqpc717aS

ingress:
  enabled: true
  className: nginx
  hosts:
    - host: pypi.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

monitoring:
  prometheus:
    enabled: false
